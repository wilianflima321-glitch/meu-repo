<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asset Manager - Professional IDE</title>
    <link rel="stylesheet" href="design-system.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
            background: var(--color-neutral-50);
        }

        .asset-manager {
            display: grid;
            grid-template-columns: 250px 1fr 300px;
            grid-template-rows: 60px 1fr;
            height: 100vh;
            gap: 0;
        }

        /* Header */
        .header {
            grid-column: 1 / -1;
            background: white;
            border-bottom: 1px solid var(--color-neutral-200);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 var(--spacing-6);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: var(--spacing-4);
        }

        .header-title {
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-semibold);
            color: var(--color-neutral-900);
        }

        .search-box {
            position: relative;
            width: 400px;
        }

        .search-icon {
            position: absolute;
            left: var(--spacing-3);
            top: 50%;
            transform: translateY(-50%);
            color: var(--color-neutral-400);
        }

        .search-box input {
            width: 100%;
            padding-left: var(--spacing-10);
        }

        /* Sidebar */
        .sidebar {
            background: white;
            border-right: 1px solid var(--color-neutral-200);
            overflow-y: auto;
        }

        .sidebar-section {
            padding: var(--spacing-4);
            border-bottom: 1px solid var(--color-neutral-100);
        }

        .sidebar-title {
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-semibold);
            color: var(--color-neutral-700);
            margin-bottom: var(--spacing-3);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .folder-tree {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .folder-item {
            padding: var(--spacing-2) var(--spacing-3);
            cursor: pointer;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            gap: var(--spacing-2);
            transition: background var(--transition-fast);
        }

        .folder-item:hover {
            background: var(--color-neutral-100);
        }

        .folder-item.active {
            background: var(--color-primary-50);
            color: var(--color-primary-700);
        }

        .filter-item {
            padding: var(--spacing-2) var(--spacing-3);
            cursor: pointer;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: background var(--transition-fast);
        }

        .filter-item:hover {
            background: var(--color-neutral-100);
        }

        .filter-item.active {
            background: var(--color-primary-50);
            color: var(--color-primary-700);
        }

        .filter-count {
            font-size: var(--font-size-xs);
            color: var(--color-neutral-500);
        }

        /* Main Content */
        .main-content {
            background: var(--color-neutral-50);
            overflow-y: auto;
            padding: var(--spacing-6);
        }

        .toolbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--spacing-6);
        }

        .view-options {
            display: flex;
            gap: var(--spacing-2);
        }

        .view-btn {
            padding: var(--spacing-2);
            background: white;
            border: 1px solid var(--color-neutral-300);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .view-btn:hover {
            background: var(--color-neutral-100);
        }

        .view-btn.active {
            background: var(--color-primary-600);
            color: white;
            border-color: var(--color-primary-600);
        }

        /* Asset Grid */
        .asset-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: var(--spacing-4);
        }

        .asset-card {
            background: white;
            border-radius: var(--radius-lg);
            overflow: hidden;
            cursor: pointer;
            transition: all var(--transition-fast);
            border: 2px solid transparent;
        }

        .asset-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .asset-card.selected {
            border-color: var(--color-primary-600);
        }

        .asset-preview {
            width: 100%;
            height: 140px;
            background: var(--color-neutral-100);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .asset-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .asset-type-icon {
            font-size: 48px;
            color: var(--color-neutral-400);
        }

        .asset-info {
            padding: var(--spacing-3);
        }

        .asset-name {
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-medium);
            color: var(--color-neutral-900);
            margin-bottom: var(--spacing-1);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .asset-meta {
            font-size: var(--font-size-xs);
            color: var(--color-neutral-500);
        }

        /* Inspector Panel */
        .inspector {
            background: white;
            border-left: 1px solid var(--color-neutral-200);
            overflow-y: auto;
            padding: var(--spacing-6);
        }

        .inspector-title {
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-semibold);
            margin-bottom: var(--spacing-6);
        }

        .inspector-section {
            margin-bottom: var(--spacing-6);
        }

        .inspector-section-title {
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-semibold);
            color: var(--color-neutral-700);
            margin-bottom: var(--spacing-3);
        }

        .property-row {
            display: flex;
            justify-content: space-between;
            padding: var(--spacing-2) 0;
            border-bottom: 1px solid var(--color-neutral-100);
        }

        .property-label {
            font-size: var(--font-size-sm);
            color: var(--color-neutral-600);
        }

        .property-value {
            font-size: var(--font-size-sm);
            color: var(--color-neutral-900);
            font-weight: var(--font-weight-medium);
        }

        .tag-list {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-2);
            margin-top: var(--spacing-2);
        }

        /* Upload Zone */
        .upload-zone {
            border: 2px dashed var(--color-neutral-300);
            border-radius: var(--radius-lg);
            padding: var(--spacing-8);
            text-align: center;
            cursor: pointer;
            transition: all var(--transition-fast);
            margin-bottom: var(--spacing-6);
        }

        .upload-zone:hover {
            border-color: var(--color-primary-600);
            background: var(--color-primary-50);
        }

        .upload-zone.dragover {
            border-color: var(--color-primary-600);
            background: var(--color-primary-50);
        }

        .upload-icon {
            font-size: 48px;
            color: var(--color-neutral-400);
            margin-bottom: var(--spacing-3);
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: var(--spacing-16) var(--spacing-6);
        }

        .empty-icon {
            font-size: 64px;
            color: var(--color-neutral-300);
            margin-bottom: var(--spacing-4);
        }

        .empty-title {
            font-size: var(--font-size-xl);
            font-weight: var(--font-weight-semibold);
            color: var(--color-neutral-700);
            margin-bottom: var(--spacing-2);
        }

        .empty-description {
            color: var(--color-neutral-500);
            margin-bottom: var(--spacing-6);
        }
    </style>
</head>
<body>
    <div class="asset-manager">
        <!-- Header -->
        <div class="header">
            <div class="header-left">
                <div class="header-title">Asset Manager</div>
                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input type="text" class="input" placeholder="Search assets..." id="searchInput">
                </div>
            </div>
            <div class="flex gap-2">
                <button class="btn btn-secondary btn-sm" onclick="createFolder()">
                    üìÅ New Folder
                </button>
                <button class="btn btn-primary btn-sm" onclick="document.getElementById('fileInput').click()">
                    ‚¨ÜÔ∏è Upload
                </button>
                <input type="file" id="fileInput" multiple style="display: none" onchange="handleFileUpload(event)">
            </div>
        </div>

        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-section">
                <div class="sidebar-title">Folders</div>
                <ul class="folder-tree">
                    <li class="folder-item active" onclick="selectFolder('all')">
                        üìÇ All Assets
                    </li>
                    <li class="folder-item" onclick="selectFolder('images')">
                        üñºÔ∏è Images
                    </li>
                    <li class="folder-item" onclick="selectFolder('3d')">
                        üé® 3D Models
                    </li>
                    <li class="folder-item" onclick="selectFolder('audio')">
                        üéµ Audio
                    </li>
                    <li class="folder-item" onclick="selectFolder('video')">
                        üé¨ Video
                    </li>
                    <li class="folder-item" onclick="selectFolder('scripts')">
                        üìù Scripts
                    </li>
                </ul>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">Type</div>
                <div class="filter-item active" onclick="filterByType('all')">
                    <span>All Types</span>
                    <span class="filter-count" id="countAll">0</span>
                </div>
                <div class="filter-item" onclick="filterByType('image')">
                    <span>Images</span>
                    <span class="filter-count" id="countImages">0</span>
                </div>
                <div class="filter-item" onclick="filterByType('3d')">
                    <span>3D Models</span>
                    <span class="filter-count" id="count3D">0</span>
                </div>
                <div class="filter-item" onclick="filterByType('audio')">
                    <span>Audio</span>
                    <span class="filter-count" id="countAudio">0</span>
                </div>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">Tags</div>
                <div class="tag-list">
                    <span class="badge badge-primary">character</span>
                    <span class="badge badge-primary">environment</span>
                    <span class="badge badge-primary">ui</span>
                    <span class="badge badge-primary">effect</span>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="toolbar">
                <div class="flex gap-2">
                    <select class="input" style="width: auto;">
                        <option>Sort by: Name</option>
                        <option>Sort by: Date</option>
                        <option>Sort by: Size</option>
                        <option>Sort by: Type</option>
                    </select>
                </div>
                <div class="view-options">
                    <button class="view-btn active" onclick="setView('grid')">‚äû</button>
                    <button class="view-btn" onclick="setView('list')">‚ò∞</button>
                </div>
            </div>

            <!-- Upload Zone -->
            <div class="upload-zone" id="uploadZone" onclick="document.getElementById('fileInput').click()">
                <div class="upload-icon">‚¨ÜÔ∏è</div>
                <div style="font-weight: 600; margin-bottom: 8px;">Drop files here or click to upload</div>
                <div style="font-size: 14px; color: var(--color-neutral-500);">
                    Supports: Images, 3D Models, Audio, Video, Scripts
                </div>
            </div>

            <!-- Asset Grid -->
            <div class="asset-grid" id="assetGrid">
                <!-- Assets will be dynamically added here -->
            </div>

            <!-- Empty State -->
            <div class="empty-state" id="emptyState" style="display: none;">
                <div class="empty-icon">üì¶</div>
                <div class="empty-title">No assets yet</div>
                <div class="empty-description">Upload your first asset to get started</div>
                <button class="btn btn-primary" onclick="document.getElementById('fileInput').click()">
                    Upload Asset
                </button>
            </div>
        </div>

        <!-- Inspector Panel -->
        <div class="inspector">
            <div class="inspector-title">Properties</div>
            
            <div id="inspectorContent">
                <div style="text-align: center; padding: 40px 0; color: var(--color-neutral-500);">
                    Select an asset to view properties
                </div>
            </div>
        </div>
    </div>

    <script>
        // Asset storage (using IndexedDB in production)
        let assets = [];
        let selectedAsset = null;
        let currentFilter = 'all';

        // Initialize
        window.addEventListener('DOMContentLoaded', () => {
            loadAssets();
            setupDragAndDrop();
            setupSearch();
        });

        // Load assets from storage
        function loadAssets() {
            // In production, load from IndexedDB
            // For now, create some demo assets
            assets = [
                {
                    id: 1,
                    name: 'character.png',
                    type: 'image',
                    size: '2.4 MB',
                    date: '2025-11-26',
                    tags: ['character', 'sprite'],
                    folder: 'images'
                },
                {
                    id: 2,
                    name: 'environment.fbx',
                    type: '3d',
                    size: '5.1 MB',
                    date: '2025-11-26',
                    tags: ['environment', '3d'],
                    folder: '3d'
                },
                {
                    id: 3,
                    name: 'background-music.mp3',
                    type: 'audio',
                    size: '3.8 MB',
                    date: '2025-11-26',
                    tags: ['music', 'background'],
                    folder: 'audio'
                }
            ];
            
            renderAssets();
            updateCounts();
        }

        // Render assets
        function renderAssets() {
            const grid = document.getElementById('assetGrid');
            const emptyState = document.getElementById('emptyState');
            
            const filteredAssets = assets.filter(asset => {
                if (currentFilter === 'all') return true;
                return asset.type === currentFilter;
            });
            
            if (filteredAssets.length === 0) {
                grid.style.display = 'none';
                emptyState.style.display = 'block';
                return;
            }
            
            grid.style.display = 'grid';
            emptyState.style.display = 'none';
            
            grid.innerHTML = filteredAssets.map(asset => `
                <div class="asset-card ${selectedAsset?.id === asset.id ? 'selected' : ''}" 
                     onclick="selectAsset(${asset.id})">
                    <div class="asset-preview">
                        <div class="asset-type-icon">${getTypeIcon(asset.type)}</div>
                    </div>
                    <div class="asset-info">
                        <div class="asset-name">${asset.name}</div>
                        <div class="asset-meta">${asset.size}</div>
                    </div>
                </div>
            `).join('');
        }

        // Get icon for asset type
        function getTypeIcon(type) {
            const icons = {
                'image': 'üñºÔ∏è',
                '3d': 'üé®',
                'audio': 'üéµ',
                'video': 'üé¨',
                'script': 'üìù'
            };
            return icons[type] || 'üìÑ';
        }

        // Select asset
        function selectAsset(id) {
            selectedAsset = assets.find(a => a.id === id);
            renderAssets();
            updateInspector();
        }

        // Update inspector
        function updateInspector() {
            const content = document.getElementById('inspectorContent');
            
            if (!selectedAsset) {
                content.innerHTML = '<div style="text-align: center; padding: 40px 0; color: var(--color-neutral-500);">Select an asset to view properties</div>';
                return;
            }
            
            content.innerHTML = `
                <div class="inspector-section">
                    <div class="inspector-section-title">Details</div>
                    <div class="property-row">
                        <span class="property-label">Name</span>
                        <span class="property-value">${selectedAsset.name}</span>
                    </div>
                    <div class="property-row">
                        <span class="property-label">Type</span>
                        <span class="property-value">${selectedAsset.type}</span>
                    </div>
                    <div class="property-row">
                        <span class="property-label">Size</span>
                        <span class="property-value">${selectedAsset.size}</span>
                    </div>
                    <div class="property-row">
                        <span class="property-label">Date</span>
                        <span class="property-value">${selectedAsset.date}</span>
                    </div>
                </div>
                
                <div class="inspector-section">
                    <div class="inspector-section-title">Tags</div>
                    <div class="tag-list">
                        ${selectedAsset.tags.map(tag => `<span class="badge badge-primary">${tag}</span>`).join('')}
                    </div>
                    <button class="btn btn-ghost btn-sm" style="margin-top: 12px; width: 100%;">
                        + Add Tag
                    </button>
                </div>
                
                <div class="inspector-section">
                    <div class="inspector-section-title">Actions</div>
                    <button class="btn btn-secondary" style="width: 100%; margin-bottom: 8px;">
                        üì• Download
                    </button>
                    <button class="btn btn-secondary" style="width: 100%; margin-bottom: 8px;">
                        ‚úèÔ∏è Rename
                    </button>
                    <button class="btn btn-secondary" style="width: 100%; margin-bottom: 8px;">
                        üìã Duplicate
                    </button>
                    <button class="btn btn-secondary" style="width: 100%; margin-bottom: 8px; background: var(--color-error); color: white;">
                        üóëÔ∏è Delete
                    </button>
                </div>
                
                <div class="inspector-section">
                    <div class="inspector-section-title">AI Actions</div>
                    <button class="btn btn-primary" style="width: 100%; margin-bottom: 8px;">
                        ü§ñ AI Auto-Tag
                    </button>
                    <button class="btn btn-primary" style="width: 100%;">
                        ‚ú® AI Optimize
                    </button>
                </div>
            `;
        }

        // Filter by type
        function filterByType(type) {
            currentFilter = type;
            renderAssets();
            
            // Update active state
            document.querySelectorAll('.filter-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.closest('.filter-item').classList.add('active');
        }

        // Update counts
        function updateCounts() {
            document.getElementById('countAll').textContent = assets.length;
            document.getElementById('countImages').textContent = assets.filter(a => a.type === 'image').length;
            document.getElementById('count3D').textContent = assets.filter(a => a.type === '3d').length;
            document.getElementById('countAudio').textContent = assets.filter(a => a.type === 'audio').length;
        }

        // Handle file upload
        function handleFileUpload(event) {
            const files = event.target.files;
            for (let file of files) {
                const asset = {
                    id: assets.length + 1,
                    name: file.name,
                    type: getFileType(file.name),
                    size: formatFileSize(file.size),
                    date: new Date().toISOString().split('T')[0],
                    tags: [],
                    folder: 'all'
                };
                assets.push(asset);
            }
            renderAssets();
            updateCounts();
            showToast('Assets uploaded successfully', 'success');
        }

        // Get file type
        function getFileType(filename) {
            const ext = filename.split('.').pop().toLowerCase();
            if (['png', 'jpg', 'jpeg', 'gif', 'svg'].includes(ext)) return 'image';
            if (['fbx', 'obj', 'gltf', 'glb'].includes(ext)) return '3d';
            if (['mp3', 'wav', 'ogg'].includes(ext)) return 'audio';
            if (['mp4', 'webm'].includes(ext)) return 'video';
            if (['js', 'ts', 'py'].includes(ext)) return 'script';
            return 'other';
        }

        // Format file size
        function formatFileSize(bytes) {
            if (bytes < 1024) return bytes + ' B';
            if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
            return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
        }

        // Setup drag and drop
        function setupDragAndDrop() {
            const zone = document.getElementById('uploadZone');
            
            zone.addEventListener('dragover', (e) => {
                e.preventDefault();
                zone.classList.add('dragover');
            });
            
            zone.addEventListener('dragleave', () => {
                zone.classList.remove('dragover');
            });
            
            zone.addEventListener('drop', (e) => {
                e.preventDefault();
                zone.classList.remove('dragover');
                handleFileUpload({ target: { files: e.dataTransfer.files } });
            });
        }

        // Setup search
        function setupSearch() {
            const input = document.getElementById('searchInput');
            input.addEventListener('input', (e) => {
                const query = e.target.value.toLowerCase();
                // Filter assets by name
                // Implementation here
            });
        }

        // Show toast notification
        function showToast(message, type = 'info') {
            // Implementation using design system
            console.log(`Toast: ${message} (${type})`);
        }

        // Create folder
        function createFolder() {
            const name = prompt('Folder name:');
            if (name) {
                showToast(`Folder "${name}" created`, 'success');
            }
        }

        // Select folder
        function selectFolder(folder) {
            document.querySelectorAll('.folder-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // Set view
        function setView(view) {
            document.querySelectorAll('.view-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }
    </script>
</body>
</html>
